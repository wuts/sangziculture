
<%
  paginated_products = Spree::Config.searcher.products if params.key?(:keywords)
  paginated_products ||= products
 %>

<% if products.empty? %>
 <div class="hint"> <%= t(:no_products_found) %></div>
<% elsif params.key?(:keywords) %>
  <h3><%= t(:search_results, :keywords => h(params[:keywords])) %></h3>
<% end %>

<% if products.any? %>
<div id="product-index" class="container">
  <div id="left_btn"><%= link_to image_tag("sangzi/left.gif"),"#" %></div>
<ul class="product-listing">
  <% products.each do |product| %>
    <% if Spree::Config[:show_zero_stock_products] || product.has_stock? %>
      <li id="product_<%= product.id %>">
        <%= link_to product_image(product), product %>

      </li>
    <% end %>
  <% end %>
</ul>
<div id="right_btn"><%= link_to image_tag("sangzi/right.gif"),"#" %></div>
 </div>
<% end %>


<% if paginated_products.respond_to?(:total_pages)
      params.delete(:search)
      params.delete(:taxon)

   %>
<div id="fyl" class="container">

   <select id="select" class="fyl" size="1" name="select">
     <% get_taxonomies.each do |taxonomy| %>

     <option  <%=' class="current"'  if @taxon && @taxon == taxonomy.root %>><%= link_to t("shop_by_taxonomy", :taxonomy => taxonomy.name.singularize), seo_url(taxonomy.root), :class => 'root' %></option>
      <% taxonomy.root.children.each do |taxon| %>

     <option <%= ' class="current"'if @taxon and ([@taxon] + @taxon.ancestors).include?(taxon) %>> <%= link_to taxon.name, seo_url(taxon) %></option>

       <% end %>
       <% end %>
    </select>
    <input type="text" size="14" value="请输入产品编码" onclick="value='';focus()" id="textfield" class="fyl" name="textfield">
    <input type="submit" value="搜索/search" id="button" class="fyl" name="button">
<%= will_paginate(paginated_products,
                    :previous_label => "&#171; #{t('previous')}",:next_label => "#{t('next')} &#187;")
%>


</div>
<% end -%>

