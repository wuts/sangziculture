
<%
  paginated_products = Spree::Config.searcher.products if params.key?(:keywords)
  paginated_products ||= products
 %>

<% if products.empty? %>
 <div class="hint"> <%= t(:no_products_found) %></div>
<% elsif params.key?(:keywords) %>
  <h3><%= t(:search_results, :keywords => h(params[:keywords])) %></h3>
<% end %>

<% if products.any? %>
<div id="slider" class="container">
 <% if products.count>6 %>

 <ul>
  <li>
     <% products[0..2].each do |product| %>
    <% if Spree::Config[:show_zero_stock_products] || product.has_stock? %>
        <span><%= link_to product_image(product), product %></span>
    <% end %>
  <% end %>
  </li>
   <li>
     <% products[3..5].each do |product| %>
    <% if Spree::Config[:show_zero_stock_products] || product.has_stock? %>
       <span> <%= link_to product_image(product), product %></span>
    <% end %>
  <% end %>
  </li>
<li>
     <% products[6..8].each do |product| %>
    <% if Spree::Config[:show_zero_stock_products] || product.has_stock? %>
        <span><%= link_to product_image(product), product %></span>
    <% end %>
  <% end %>
  </li>
</ul>
 <% elsif  (3..6).include?(products.count) %>

  <ul>
  <li>
     <% products[0..2].each do |product| %>
    <% if Spree::Config[:show_zero_stock_products] || product.has_stock? %>
       <span> <%= link_to product_image(product), product %></span>
    <% end %>
  <% end %>
  </li>
  <li>
     <% products[3..5].each do |product| %>
    <% if Spree::Config[:show_zero_stock_products] || product.has_stock? %>
       <span> <%= link_to product_image(product), product %></span>
    <% end %>
  <% end %>
  </li>
  <ul>
    <% else %>
   <ul>
  <li>
     <% products.each do |product| %>
    <% if Spree::Config[:show_zero_stock_products] || product.has_stock? %>
        <span><%= link_to product_image(product), product %></span>
    <% end %>
  <% end %>
  </li>
  <li>
    </ul>
   <% end %>

 </div>
<% end %>



<% if paginated_products.respond_to?(:total_pages)
   params.delete(:search)
      params.delete(:taxon)

   %>
<div id="fyl" class="container">


    <input type="text" size="20" value="请输入产品编码" onclick="value='';focus()" id="textfield" class="fyl" name="textfield">
    <input type="submit" value="搜索/search" id="button" class="fyl" name="button">
<%= will_paginate(paginated_products,
                    :previous_label => "&#171; #{t('previous')}",:next_label => "#{t('next')} &#187;")
%>


</div>
<% end -%>

